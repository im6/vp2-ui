(()=>{var e={8286:()=>{!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){var n=document.createEvent("CustomEvent"),i=t||{bubbles:!1,cancelable:!1,detail:void 0};return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var e=new CustomEvent("_COLORPK_SCRIPT_READY");window.dispatchEvent(e)}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{"use strict";n(8286);var e=void 0,t=document.querySelector("[name=csrfmiddlewaretoken]").getAttribute("value"),i=function(){};document.cookie.indexOf("_csrf")>-1&&(document.cookie="_csrf=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload());var o=function(){var e="_tls";try{return window.localStorage.setItem(e,"1"),window.localStorage.getItem(e),window.localStorage.removeItem(e),!0}catch(e){return!1}}(),r=function(e,n){!function(e){var n=e.method,i=e.url,o=e.data,r=e.success,a=e.fail,c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?r(JSON.parse(c.responseText)):a())},c.open(n,i),c.setRequestHeader("X-CSRFToken",t),"GET"!==n&&c.setRequestHeader("Content-Type","application/json"),o&&Object.keys(o).length?c.send(JSON.stringify(o)):c.send()}({method:n,url:"/like/".concat(e),success:i,fail:i})},a="https://dkny.oss-cn-hangzhou.aliyuncs.com/4/";function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=null;var d,f,h,w="hideWelcome",p=new(function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u||(this.sizeInfo=null,u=this),u}var t,n,i;return t=e,i=[{key:"widthUtility",value:function(e){return e>692?.9:.99}},{key:"boxSize",value:function(e){var t;return[e<321?125+2*(t=4):e<769?150+2*(t=4):220+2*(t=10),t]}}],(n=[{key:"windowWidth",set:function(t){var n=c(e.boxSize(t),2),i=n[0],o=n[1],r=e.widthUtility(t),a=Math.floor(t*r/i)*i,l=6*i,s=2*o;this.sizeInfo={containerWidth:"".concat(a,"px"),containerWidthMax:"".concat(l,"px"),helperWidth:"".concat(a-s,"px"),helperWidthMax:"".concat(l-s,"px")}}}])&&s(t.prototype,n),i&&s(t,i),e}()),y=document.querySelector(".list"),m=!!o&&"1"===window.localStorage.getItem(w)&&!1,v=document.querySelector(".help"),k=function(e){p.windowWidth=e;var t=p.sizeInfo,n=t.containerWidth,i=t.containerWidthMax,o=t.helperWidth,r=t.helperWidthMax;y.style.width=n,y.style.maxWidth=i,v&&(v.style.width=o,v.style.maxWidth=r)};function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.onresize=(d=function(e){k(e.target.innerWidth)},f=250,h=null,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=e;clearTimeout(h),h=setTimeout((function(){d.apply(o,n)}),f)}),k(window.innerWidth),!m&&v&&(v.style.display="block",window._colorpk.removeWelcome=function(){v.parentElement.removeChild(v),o&&window.localStorage.setItem(w,"1")});const b=function(){function e(t){var n=t.id,i=t.color,o=t.like,r=t.isLiked,a=t.animDelay,c=t.onLike,l=t.onUnlike,s=t.onRedir;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.color=i,this.like=o,this.isLiked=r,this.animDelay=a,this.onLike=c,this.onUnlike=l,this.onRedir=s,this.createElement()}var t,n,i;return t=e,(n=[{key:"createElement",value:function(){var e=this,t=document.createElement("div");t.classList.add("box"),t.dataset.k=this.id,t.dataset.l=this.like,t.style.animationDelay=this.animDelay;var n=document.createElement("div");n.classList.add("canvas"),this.color.split("#").map((function(e){return"#".concat(e)})).forEach((function(t){var i=document.createElement("div"),o=document.createElement("span");o.innerText=t,i.appendChild(o),i.style.backgroundColor=t,i.style.animationDelay=e.animDelay,n.appendChild(i)})),this.onRedir&&(n.onclick=function(t){"DIV"===t.target.tagName&&e.onRedir(e.id)});var i=document.createElement("button");return i.classList.add("btn"),i.setAttribute("type","button"),i.innerHTML='<img src="'.concat(a).concat(this.isLiked?"hrtr.svg":"hrt.svg",'">').concat(this.like),i.onclick=function(){if(i.innerHTML.indexOf("hrt.svg")>-1){var t=e.isLiked?e.like:e.like+1;i.innerHTML='<img src="'.concat(a,'hrtr.svg">').concat(t),e.onLike(e.id)}else{var n=e.isLiked?e.like-1:e.like;i.innerHTML='<img src="'.concat(a,'hrt.svg">').concat(n),e.onUnlike(e.id)}},t.appendChild(n),t.appendChild(i),t}}])&&g(t.prototype,n),i&&g(t,i),e}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E="userLike";const L=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAuth=window._colorpk.auth,this.hasLocalStorage=o,this.likeMap=this.initLike()}var t,n,i;return t=e,(n=[{key:"initLike",value:function(){var e={};if(this.isAuth)Array.isArray(window._colorpk.list1)?window._colorpk.list1.forEach((function(t){e[t.id.toString()]=!0})):Array.isArray(window._colorpk.likes)&&window._colorpk.likes.forEach((function(t){e[t.toString()]=!0}));else if(this.hasLocalStorage){var t=JSON.parse(window.localStorage.getItem(E));Array.isArray(t)?t.forEach((function(t){e[t.toString()]=!0})):window.localStorage.setItem(E,JSON.stringify([]))}return e}},{key:"addLike",value:function(e){if(this.likeMap[e.toString()]=!0,r(e,"POST"),!this.isAuth&&this.hasLocalStorage){var t=JSON.parse(window.localStorage.getItem(E));t.push(e),window.localStorage.setItem(E,JSON.stringify(t))}}},{key:"removeLike",value:function(e){if(delete this.likeMap[e.toString()],r(e,"DELETE"),!this.isAuth&&this.hasLocalStorage){var t=JSON.parse(window.localStorage.getItem(E));t=t.filter((function(t){return t!==e})),window.localStorage.setItem(E,JSON.stringify(t))}}}])&&S(t.prototype,n),i&&S(t,i),e}());var x=document.getElementsByClassName("list")[0],O="list0",C="list1",T=O,A=function(e){var t=e===C;x.innerHTML="",window._colorpk[e].forEach((function(e,n){var i=e.id,o=e.color,r=e.like,a=new b({id:i,color:o,like:r,isLiked:t||Object.prototype.hasOwnProperty.call(L.likeMap,e.id),onLike:function(e){if(L.addLike(e),!t){var n=window._colorpk[O].find((function(t){return t.id===e}));window._colorpk[C].push(n)}},onUnlike:function(e){if(L.removeLike(e),window._colorpk[C]=window._colorpk[C].filter((function(t){return t.id!==e})),t){var n=document.querySelector("[data-k='".concat(e,"']"));x.removeChild(n)}},onRedir:function(e){window.location.href="/color/".concat(e)}});try{var c="".concat(45*n,"ms");a.style.animationDelay=c;for(var l=a.querySelectorAll(".canvas > div"),s=0;s<4;s+=1)l[s].style.animationDelay=c}catch(e){console.warn("browser compatible")}x.appendChild(a)})),window._colorpk[e].length<1&&(x.innerHTML="<h3>You have not ".concat(t?"liked":"created"," any color.</h3>"))};document.getElementById("switch_left").onclick=function(){T!==O&&(A(O),T=O)},document.getElementById("switch_right").onclick=function(){T!==C&&(A(C),T=C)},A(T)})()})();