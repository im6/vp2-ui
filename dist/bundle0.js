(()=>{var t={8286:()=>{!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){var n=document.createEvent("CustomEvent"),i=e||{bubbles:!1,cancelable:!1,detail:void 0};return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var t=new CustomEvent("_COLORPK_SCRIPT_READY");window.dispatchEvent(t)}},e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}(()=>{"use strict";n(8286);var t=void 0,e=document.querySelector("[name=csrfmiddlewaretoken]").getAttribute("value"),i=function(){};document.cookie.indexOf("_csrf")>-1&&(document.cookie="_csrf=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload());var o=function(){var t="_tls";try{return window.localStorage.setItem(t,"1"),window.localStorage.getItem(t),window.localStorage.removeItem(t),!0}catch(t){return!1}}(),r=function(t,n){!function(t){var n=t.method,i=t.url,o=t.data,r=t.success,a=t.fail,c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?r(JSON.parse(c.responseText)):a())},c.open(n,i),c.setRequestHeader("X-CSRFToken",e),"GET"!==n&&c.setRequestHeader("Content-Type","application/json"),o&&Object.keys(o).length?c.send(JSON.stringify(o)):c.send()}({method:n,url:"/like/".concat(t),success:i,fail:i})},a=function(e,n){var i=null;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var c=t;clearTimeout(i),i=setTimeout((function(){e.apply(c,r)}),n)}},c="https://dkny.oss-cn-hangzhou.aliyuncs.com/4/";function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=null;var f="hideWelcome",h=new(function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d||(this.sizeInfo=null,d=this),d}var e,n,i;return e=t,i=[{key:"widthUtility",value:function(t){return t>692?.9:.99}},{key:"boxSize",value:function(t){var e;return[t<321?125+2*(e=4):t<769?150+2*(e=4):220+2*(e=10),e]}}],(n=[{key:"windowWidth",set:function(e){var n=l(t.boxSize(e),2),i=n[0],o=n[1],r=t.widthUtility(e),a=Math.floor(e*r/i)*i,c=6*i,s=2*o;this.sizeInfo={containerWidth:"".concat(a,"px"),containerWidthMax:"".concat(c,"px"),helperWidth:"".concat(a-s,"px"),helperWidthMax:"".concat(c-s,"px")}}}])&&u(e.prototype,n),i&&u(e,i),t}()),m=document.querySelector(".list"),p=!!o&&"1"===window.localStorage.getItem(f)&&!1,v=document.querySelector(".help"),y=function(t){h.windowWidth=t;var e=h.sizeInfo,n=e.containerWidth,i=e.containerWidthMax,o=e.helperWidth,r=e.helperWidthMax;m.style.width=n,m.style.maxWidth=i,v&&(v.style.width=o,v.style.maxWidth=r)};function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}window.onresize=a((function(t){y(t.target.innerWidth)}),250),y(window.innerWidth),!p&&v&&(v.style.display="block",window._colorpk.removeWelcome=function(){v.parentElement.removeChild(v),o&&window.localStorage.setItem(f,"1")});const k=function(){function t(e){var n=e.id,i=e.color,o=e.like,r=e.isLiked,a=e.animDelay,c=e.onLike,l=e.onUnlike,s=e.onRedir;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.color=i,this.like=o,this.isLiked=r,this.animDelay=a,this.onLike=c,this.onUnlike=l,this.onRedir=s,this.createElement()}var e,n,i;return e=t,(n=[{key:"createElement",value:function(){var t=this,e=document.createElement("div");e.classList.add("box"),e.dataset.k=this.id,e.dataset.l=this.like,e.style.animationDelay=this.animDelay;var n=document.createElement("div");n.classList.add("canvas"),this.color.split("#").map((function(t){return"#".concat(t)})).forEach((function(e){var i=document.createElement("div"),o=document.createElement("span");o.innerText=e,i.appendChild(o),i.style.backgroundColor=e,i.style.animationDelay=t.animDelay,n.appendChild(i)})),this.onRedir&&(n.onclick=function(e){"DIV"===e.target.tagName&&t.onRedir(t.id)});var i=document.createElement("button");return i.classList.add("btn"),i.setAttribute("type","button"),i.innerHTML='<img src="'.concat(c).concat(this.isLiked?"hrtr.svg":"hrt.svg",'">').concat(this.like),i.onclick=function(){if(i.innerHTML.indexOf("hrt.svg")>-1){var e=t.isLiked?t.like:t.like+1;i.innerHTML='<img src="'.concat(c,'hrtr.svg">').concat(e),t.onLike(t.id)}else{var n=t.isLiked?t.like-1:t.like;i.innerHTML='<img src="'.concat(c,'hrt.svg">').concat(n),t.onUnlike(t.id)}},e.appendChild(n),e.appendChild(i),e}}])&&w(e.prototype,n),i&&w(e,i),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b="userLike";const S=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAuth=window._colorpk.auth,this.hasLocalStorage=o,this.likeMap=this.initLike()}var e,n,i;return e=t,(n=[{key:"initLike",value:function(){var t={};if(this.isAuth)Array.isArray(window._colorpk.list1)?window._colorpk.list1.forEach((function(e){t[e.k.toString()]=!0})):Array.isArray(window._colorpk.likes)&&window._colorpk.likes.forEach((function(e){t[e.toString()]=!0}));else if(this.hasLocalStorage){var e=JSON.parse(window.localStorage.getItem(b));Array.isArray(e)?e.forEach((function(e){t[e.toString()]=!0})):window.localStorage.setItem(b,JSON.stringify([]))}return t}},{key:"addLike",value:function(t){if(this.likeMap[t.toString()]=!0,r(t,"POST"),!this.isAuth&&this.hasLocalStorage){var e=JSON.parse(window.localStorage.getItem(b));e.push(t),window.localStorage.setItem(b,JSON.stringify(e))}}},{key:"removeLike",value:function(t){if(delete this.likeMap[t.toString()],r(t,"DELETE"),!this.isAuth&&this.hasLocalStorage){var e=JSON.parse(window.localStorage.getItem(b));e=e.filter((function(e){return e!==t})),window.localStorage.setItem(b,JSON.stringify(e))}}}])&&g(e.prototype,n),i&&g(e,i),t}());var E=window._colorpk.initData,L=E.length,x=document.getElementsByClassName("list")[0],O=0,T=function(t){for(var e=t,n=0;n<t;n+=1){var i=E[n+O];if(!i){e=n;break}var o=i.k,r=i.v,a=i.s,c=new k({id:o,color:r,like:a,isLiked:Object.prototype.hasOwnProperty.call(S.likeMap,o),animDelay:"".concat(45*n,"ms"),onLike:function(t){S.addLike(t)},onUnlike:function(t){S.removeLike(t)},onRedir:function(t){window.location.href="/color/".concat(t)}});x.appendChild(c)}O+=e};window.onscroll=a((function(t){var e=t.target.scrollingElement||t.target.activeElement,n=document.documentElement,i=e.scrollTop||n.scrollTop;n.scrollHeight-i-n.clientHeight<250&&O<L&&T(17)}),200),T(31)})()})();